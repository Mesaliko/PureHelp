<html><head><title>UseNetworkTLS</title><meta charset="utf-8"></head>
<body bgcolor="#FFFFDF" link="#009999" vlink="#006666" alink="#006666">
<font face="Arial" size="2"><p align="center"><b><font size="4">UseNetworkTLS()</font></b></p>
<p><b>Syntaxe</b></p><blockquote>
<font color="#006666"><b>UseNetworkTLS</b></font>([ClePrivee$, Certificat$ [, CaCertificat$]])</blockquote>

</blockquote>
<b>Description</b><br><blockquote>

Active et configure la prise en charge du cryptage TLS pour la bibliothèque réseau. 
Cette commande doit être appelée avant d'utiliser <a href="createnetworkserver.html">CreateNetworkServer()</a> ou 
<a href="opennetworkconnection.html">OpenNetworkConnection()</a> avec les indicateurs TLS. 

</blockquote><p><b>Arguments</b></p><blockquote>
<style type="text/css">
table.parameters { border-spacing: 0px; border-style: none; border-collapse: collapse; }
table.parameters td { border-width: 1px; padding: 6px; border-style: solid; border-color: gray; vertical-align: top; font-family:Arial; font-size:10pt; }
</style>
<table width="90%" class="parameters">
<tr><td width="10%"><i>ClePrivee$ (optionnel)</i></td>
<td width="90%"> 
La clé privée à utiliser pour TLS lors de l'utilisation de <a href="createnetworkserver.html">CreateNetworkServer()</a>.<br>
Lorsque vous utilisez TLS uniquement avec <a href="opennetworkconnection.html">OpenNetworkConnection()</a>, ce paramètre 
n'est pas nécessaire.<br>
Il doit être au format suivant : 
<pre><font face="Courier New, Courier, mono" size="2">&quot;-----BEGIN PRIVATE KEY-----&quot;+<font color="#924B72">#LF$</font>+ &quot;MIICdQIBADANBgkqhkiG9w0BAQEFAASCAl8wggJbAgEAAoGBAPEbSQq/uwESZduPtDd83qXXkSPf6lUNa17xhM2fOZQxGr0Fdmvw6IsC+QGX25EE1TG6TFQkHlM2rW8y6a3WEC/WzCNWaTCPYD/rguiAFG+4eQmwHjiJFVec0InjjSG9SX8xwS/gQeWdQniKROO4DmMJO8N7mdUhdHOD SntXdr9zAgMBAAECgYAE+VMgbaQl+YMwbF6DZogRU8kivFPRPV2hr8nVlBtT+09Z5uryfx3NAFqytbdJ3penVviMI9KcVNxvFtXLSEc9KyjzgysorAfUpwFuECCLDbOXX0HlV6rgkqJdhyV6FybcDLvgcvulHQ64QdYRhW+jPx7vXk3h0/JRFqKQJsY7QQJBAPrDLJRPbAw+Mlq1fHBWk 8Z1Qn1ivPAmz+2nPAgDya/xdAlb9GbFAMzCS3upIBpxW70uLI04OuTVhwYL194I5C0CQQD2JHtHp25SkIDpBgZGicEC7yAIE/wPC0P9X85UJqXx5dPx4HbEc8lqSKMbCzkbHyvjHonSHu00QxU1W6ZALFYfAkBcPWzphSl+e2Z0XWvPutkS2FFD5A0R3YUAq1J2tEX9NTj0tGF7aB36M8 ImU7jeYTJYrWJv8+4d/Ll1LOgT4XtlAkAxofOV5EYTsf28fzF+wcJAtDUyS81Uv0HLcqkpQM3PdDeDm253eJ2Rp+nzxxSRynxQBNVnoELWefxp0Pw6DnajAkBF5h7fQIbwAEPrhDzhjMXU7g9k9KzkkJN/bluLbleqkkAz1kfkGtWXJdGITZuY4K/X2yp1diWQ0utZjmOmhWsl&quot;+<font color="#924B72">#LF$</font>+
&quot;-----END PRIVATE KEY-----&quot;
</font></pre>

</td></tr>
<tr><td><i>Certificat$ (optionnel)</i></td>
<td> 
Le certificat à utiliser pour TLS lors de l'utilisation de <a href="createnetworkserver.html">CreateNetworkServer()</a>.<br>
Lorsque vous utilisez TLS uniquement avec <a href="opennetworkconnection.html">OpenNetworkConnection()</a>, ce paramètre 
n'est pas nécessaire.<br>
Il doit être au format suivant : 
<pre><font face="Courier New, Courier, mono" size="2">&quot;-----BEGIN CERTIFICATE-----&quot;+<font color="#924B72">#LF$</font>+ &quot;MIICnTCCAgYCCQD0AWy2vzfcpzANBgkqhkiG9w0BAQUFADCBkjELMAkGA1UEBhMCVVMxDjAMBgNVBAgTBVN0YXRlMQ0wCwYDVQQHEwRDaXR5MRUwEwYDVQQKEwxPcmdhbml6YXRpb24xHDAaBgNVBAsTE09yZ2FuaXphdGlvbmFsIFVuaXQxLzAtBgNVBAMTJkNvbW1vbiBOYW1lIChlLmcuLCB5b3VyIH NlcnZlciBkb21haW4pMB4XDTI0MTEwNjE2NTI1N1oXDTI0MTIwNjE2NTI1N1owgZIxCzAJBgNVBAYTAlVTMQ4wDAYDVQQIEwVTdGF0ZTENMAsGA1UEBxMEQ2l0eTEVMBMGA1UEChMMT3JnYW5pemF0aW9uMRwwGgYDVQQLExNPcmdhbml6YXRpb25hbCBVbml0MS8wLQYDVQQDEyZDb21tb24gTmFtZSAoZ S5nLiwgeW91ciBzZXJ2ZXIgZG9tYWluKTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA8RtJCr+7ARJl24+0N3zepdeRI9/qVQ1rXvGEzZ85lDEavQV2a/DoiwL5AZfbkQTVMbpMVCQeUzatbzLprdYQL9bMI1ZpMI9gP+uC6IAUb7h5CbAeOIkVV5zQieONIb1JfzHBL+BB5Z1CeIpE47gOYwk7w3uZ 1SF0c4NKe1d2v3MCAwEAATANBgkqhkiG9w0BAQUFAAOBgQCprm5a5bg1LqCDdtwDTnRDmVcca6HoUlvbjZLmWdLjltG1McNAATppTy/bF7vT3jXLobA1Vzs2g14POjYQhPnIbRPEnNzvAe+Se3y0YeFOwYarEyFBHKHODGIPaCnXGH8gB9fgcp2SYtLaPKvXdNL44VeYGbD4+fvUcu/zkXqTSg==&quot;+<font color="#924B72">#LF$</font>+
&quot;-----END CERTIFICATE-----&quot;
</font></pre>

</td></tr>
<tr><td><i>CaCertificat$ (optionnel)</i></td>
<td> 
Le certificat d'autorité intermédiaire qui a émis le 'Certificat$' à utiliser pour 
TLS lors de l'utilisation de <a href="createnetworkserver.html">CreateNetworkServer()</a>.<br>
Lorsque vous utilisez TLS uniquement avec <a href="opennetworkconnection.html">OpenNetworkConnection()</a>, ce paramètre 
n'est pas nécessaire. Il doit être au même format que 'Certificate$'. 

</td></tr>
</table>
</blockquote><p><b>Valeur de retour</b></p><blockquote>
Aucune.


</blockquote><p><b>Exemple:</b> Serveur TLS</p><blockquote>

<pre><font face="Courier New, Courier, mono" size="2">  Timeout = 15000 <font color="#006666">; délai d'expiration global de 15 secondes</font>

  PrivateKey$ = &quot;-----BEGIN PRIVATE KEY-----&quot;+<font color="#924B72">#LF$</font>+
         &quot;MIICdQIBADANBgkqhkiG9w0BAQEFAASCAl8wggJbAgEAAoGBAPEbSQq/uwESZduPtDd83qXXkSPf6lUNa17xhM2fOZQxGr0Fdmvw6IsC+QGX25EE1TG6TFQkHlM2rW8y6a3WEC/WzCNWaTCPYD/rguiAFG+4eQmwHjiJFVec0InjjSG9SX8xwS/gQeWdQniKROO4DmMJO8N7mdUhdHODSntXdr9zAgMBAAECgYAE+VMgbaQl+YMwbF6DZogRU8kivFPRPV2hr8nVlBtT+09Z5uryfx3NAFqytbdJ3penVviMI9KcVNxvFtXLSEc9KyjzgysorAfUpwFuECCLDbOXX0HlV6rgkqJdhyV6FybcDLvgcvulHQ64QdYRhW+jPx7vXk3h0/JRFqKQJsY7QQJBAPrDLJRPbAw+Mlq1fHBWk8Z1Qn1ivPAmz+2nPAgDya/xdAlb9GbFAMzCS3upIBpxW70uLI04OuTVhwYL194I5C0CQQD2JHtHp25SkIDpBgZGicEC7yAIE/wPC0P9X85UJqXx5dPx4HbEc8lqSKMbCzkbHyvjHonSHu00QxU1W6ZALFYfAkBcPWzphSl+e2Z0XWvPutkS2FFD5A0R3YUAq1J2tEX9NTj0tGF7aB36M8ImU7jeYTJYrWJv8+4d/Ll1LOgT4XtlAkAxofOV5EYTsf28fzF+wcJAtDUyS81Uv0HLcqkpQM3PdDeDm253eJ2Rp+nzxxSRynxQBNVnoELWefxp0Pw6DnajAkBF5h7fQIbwAEPrhDzhjMXU7g9k9KzkkJN/bluLbleqkkAz1kfkGtWXJdGITZuY4K/X2yp1diWQ0utZjmOmhWsl&quot;+<font color="#924B72">#LF$</font>+
         &quot;-----END PRIVATE KEY-----&quot;

  Cert$ = &quot;-----BEGIN CERTIFICATE-----&quot;+<font color="#924B72">#LF$</font>+
          &quot;MIICnTCCAgYCCQD0AWy2vzfcpzANBgkqhkiG9w0BAQUFADCBkjELMAkGA1UEBhMCVVMxDjAMBgNVBAgTBVN0YXRlMQ0wCwYDVQQHEwRDaXR5MRUwEwYDVQQKEwxPcmdhbml6YXRpb24xHDAaBgNVBAsTE09yZ2FuaXphdGlvbmFsIFVuaXQxLzAtBgNVBAMTJkNvbW1vbiBOYW1lIChlLmcuLCB5b3VyIHNlcnZlciBkb21haW4pMB4XDTI0MTEwNjE2NTI1N1oXDTI0MTIwNjE2NTI1N1owgZIxCzAJBgNVBAYTAlVTMQ4wDAYDVQQIEwVTdGF0ZTENMAsGA1UEBxMEQ2l0eTEVMBMGA1UEChMMT3JnYW5pemF0aW9uMRwwGgYDVQQLExNPcmdhbml6YXRpb25hbCBVbml0MS8wLQYDVQQDEyZDb21tb24gTmFtZSAoZS5nLiwgeW91ciBzZXJ2ZXIgZG9tYWluKTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA8RtJCr+7ARJl24+0N3zepdeRI9/qVQ1rXvGEzZ85lDEavQV2a/DoiwL5AZfbkQTVMbpMVCQeUzatbzLprdYQL9bMI1ZpMI9gP+uC6IAUb7h5CbAeOIkVV5zQieONIb1JfzHBL+BB5Z1CeIpE47gOYwk7w3uZ1SF0c4NKe1d2v3MCAwEAATANBgkqhkiG9w0BAQUFAAOBgQCprm5a5bg1LqCDdtwDTnRDmVcca6HoUlvbjZLmWdLjltG1McNAATppTy/bF7vT3jXLobA1Vzs2g14POjYQhPnIbRPEnNzvAe+Se3y0YeFOwYarEyFBHKHODGIPaCnXGH8gB9fgcp2SYtLaPKvXdNL44VeYGbD4+fvUcu/zkXqTSg==&quot;+<font color="#924B72">#LF$</font>+
          &quot;-----END CERTIFICATE-----&quot;

<font color="#006666">  UseNetworkTLS</font>(PrivateKey$, Cert$)
  <b><font color="#006666">If</font></b> <font color="#006666">CreateNetworkServer</font>(0, 20252, <font color="#924B72">#PB_Network_TCP</font> | <font color="#924B72">#PB_Network_IPv4</font> | <font color="#924B72">#PB_Network_TLSv1</font>, &quot;127.0.0.1&quot;)
    <b><font color="#006666">Debug</font></b> &quot;Serveur TLS lancé sur 127.0.0.1:20252 - Connexions en attente...&quot;
    
    <b><font color="#006666">Repeat</font></b>
      <b><font color="#006666">Select</font></b> <font color="#006666">NetworkServerEvent</font>()
        <b><font color="#006666">Case</font></b> <font color="#924B72">#PB_NetworkEvent_Data</font>
          
          <b><font color="#006666">Debug</font></b> &quot;Data reçue !&quot;
          ClientID =<font color="#006666"> EventClient</font>()
          *Buffer =<font color="#006666"> AllocateMemory</font>(1000)
          <b><font color="#006666">If</font></b> *Buffer
            <b><font color="#006666">Debug</font></b> <font color="#006666">ReceiveNetworkData</font>(ClientID, *Buffer, 1000)
          
            <b><font color="#006666">Debug</font></b> &quot;Texte: &quot;+<font color="#006666">PeekS</font>(*Buffer, -1, <font color="#924B72">#PB_UTF8</font>)
<font color="#006666">            SendNetworkString</font>(ClientID, &quot;Bien reçu !!!&quot;)
            
<font color="#006666">            FreeMemory</font>(*Buffer)
          <b><font color="#006666">EndIf</font></b>
          
        <b><font color="#006666">Case</font></b> <font color="#924B72">#PB_NetworkEvent_None</font>
<font color="#006666">          Delay</font>(100) <font color="#006666">; Ne volez pas tout le temps CPU en attendant la connexion</font>
          Timeout - 100
      <b><font color="#006666">EndSelect</font></b>
          
    <b><font color="#006666">Until</font></b> Timeout &lt;= 0
    
    <b><font color="#006666">Debug</font></b> &quot;Fermeture du serveur après &quot; +<font color="#006666"> Str</font>(Timeout/1000) + &quot; secs délai d'expiration&quot;
    
<font color="#006666">    CloseNetworkServer</font>(0)
  <b><font color="#006666">Else</font></b>
    <b><font color="#006666">Debug</font></b> &quot;Impossible de créer le serveur TLS&quot;
  <b><font color="#006666">EndIf</font></b>

</font></pre>

</blockquote><p><b>Exemple:</b> TLS Client</p><blockquote>

<pre><font face="Courier New, Courier, mono" size="2">  Timeout = 150000 <font color="#006666">; 15 secondes de délai d'attente global</font>

<font color="#006666">  UseNetworkTLS</font>()

  Connection =<font color="#006666"> OpenNetworkConnection</font>(&quot;127.0.0.1&quot;, 20252, <font color="#924B72">#PB_Network_TCP</font> | <font color="#924B72">#PB_Network_IPv4</font> | <font color="#924B72">#PB_Network_TLSv1</font>)
  <b><font color="#006666">If</font></b> Connection
    
    <font color="#006666">; Envoyez une chaîne au serveur pour tester</font>
<font color="#006666">    SendNetworkString</font>(Connection, &quot;GET / HTTP/1.1&quot; + <font color="#924B72">#CRLF$</font> + &quot;Host: www.purebasic.fr&quot; + <font color="#924B72">#CRLF$</font> + <font color="#924B72">#CRLF$</font>)
    
    <b><font color="#006666">Repeat</font></b>
      <b><font color="#006666">Select</font></b> <font color="#006666">NetworkClientEvent</font>(Connection)
        <b><font color="#006666">Case</font></b> <font color="#924B72">#PB_NetworkEvent_Data</font>
          *Buffer =<font color="#006666"> AllocateMemory</font>($FFFF)
          <b><font color="#006666">If</font></b> *Buffer
            Length =<font color="#006666"> ReceiveNetworkData</font>(Connection, *Buffer,<font color="#006666"> MemorySize</font>(*Buffer))
            Received$ +<font color="#006666"> PeekS</font>(*Buffer, Length, <font color="#924B72">#PB_UTF8</font> | <font color="#924B72">#PB_ByteLength</font>)
            <b><font color="#006666">Debug</font></b> &quot;Texte reçu: &quot;+ Received$
<font color="#006666">            FreeMemory</font>(*Buffer)
          <b><font color="#006666">EndIf</font></b>
          
        <b><font color="#006666">Case</font></b> <font color="#924B72">#PB_NetworkEvent_Disconnect</font>
          <b><font color="#006666">Debug</font></b> &quot;Déconnecté&quot;
          <b><font color="#006666">Break</font></b>
          
        <b><font color="#006666">Case</font></b> <font color="#924B72">#PB_NetworkEvent_None</font>
<font color="#006666">          Delay</font>(100)
          Timeout - 100
          
      <b><font color="#006666">EndSelect</font></b>
    <b><font color="#006666">Until</font></b> Timeout &lt;= 0
    
<font color="#006666">    CloseNetworkConnection</font>(Connection)
  <b><font color="#006666">Else</font></b>
    <b><font color="#006666">Debug</font></b> &quot;Impossible d'ouvrir la connexion sur 127.0.0.1:20252&quot;
  <b><font color="#006666">EndIf</font></b>
</font></pre>

</blockquote><p><b>Voir aussi</b></p><blockquote>

<a href="createnetworkserver.html">CreateNetworkServer()</a>, <a href="opennetworkconnection.html">OpenNetworkConnection()</a> 

</Blockquote><p><b>OS Supportés </b><Blockquote>Tous</Blockquote></p><center><- <a href=serverid.html>ServerID()</a> - <a href=index.html>Network Index</a><br><br></blockquote>
</font></body></html>
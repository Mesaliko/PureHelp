<html><head><title>WindowEvent</title><meta charset="utf-8"></head>
<body bgcolor="#FFFFDF" link="#009999" vlink="#006666" alink="#006666">
<font face="Arial" size="2"><p align="center"><b><font size="4">WindowEvent()</font></b></p>
<p><b>Syntaxe</b></p><blockquote>
Resultat = <font color="#006666"><b>WindowEvent</b></font>()</blockquote>

</blockquote>
<b>Description</b><br><blockquote>

Teste si un évènement s'est produit 
sur chacune des fenêtres ouvertes. 

</blockquote><p><b>Arguments</b></p><blockquote>
Aucun.


</blockquote><p><b>Valeur de retour</b></p><blockquote>

Renvoie le prochain évènement de la 
file d'attente ou zéro s'il n'y a plus 
d'évènements. 
<br>
<br>
Contrairement à la fonction 
<a href="waitwindowevent.html">WaitWindowEvent()</a>, elle n'attend pas 
le prochain évènement et le renvoi 
est donc toujours immédiat. Cela peut 
être utile quand un traitement 
doit être fait sans attendre (par 
exemple une 
<a href="../network/index.html">transaction réseau</a>). 
<br>
<br>
<a href="event.html">Event()</a> peut être utilisé pour récupérer cette valeur. 
<br>
<br>
Les évènements renvoyés sont : 
<pre><font face="Courier New, Courier, mono" size="2">  <font color="#924B72">#PB_Event_Menu</font>            : Un <a href="../menu/index.html">menu</a> a été sélectionné
  <font color="#924B72">#PB_Event_Gadget</font>          : Un <a href="../gadget/index.html">gadget</a> a été cliqué
  <font color="#924B72">#PB_Event_SysTray</font>         : Une icône dans la zone <a href="../systray/index.html">SysTray</a> a été cliquée 
  <font color="#924B72">#PB_Event_Timer</font>           : Le temps d'un <a href="addwindowtimer.html">minuteur</a> s'est écoulé
  <font color="#924B72">#PB_Event_CloseWindow</font>     : L'icône de fermeture de fenêtre a été cliquée
  <font color="#924B72">#PB_Event_Repaint</font>         : Tout ou partie du contenu de la fenêtre a été détruit et doit être reconstitué 
                              (Utile pour les applications <a href="../2ddrawing/index.html">graphiques 2D</a>)
  <font color="#924B72">#PB_Event_SizeWindow</font>      : La fenêtre a été redimensionnée  
  <font color="#924B72">#PB_Event_MoveWindow</font>      : La fenêtre a été déplacée
  <font color="#924B72">#PB_Event_MinimizeWindow</font>  : La fenêtre a été minimisée
  <font color="#924B72">#PB_Event_MaximizeWindow</font>  : La fenêtre a été maximisée
  <font color="#924B72">#PB_Event_RestoreWindow</font>   : La fenêtre a été restaurée à sa taille normale
  <font color="#924B72">#PB_Event_ActivateWindow</font>  : La fenêtre a été activée (gain du focus)
  <font color="#924B72">#PB_Event_DeactivateWindow</font>: La fenêtre a été désactivée (perte du focus)
  <font color="#924B72">#PB_Event_LeftDoubleClick</font> : Un double clic gauche de la souris s'est produit sur la fenêtre
  <font color="#924B72">#PB_Event_LeftClick</font>       : Un clic gauche de la souris s'est produit sur la fenêtre
  <font color="#924B72">#PB_Event_RightClick</font>      : Un clic droit de la souris s'est produit sur la fenêtre. Cela peut être utile pour afficher un menu contextuel
  <font color="#924B72">#PB_Event_WindowDrop</font>      : Une opération <a href="../dragdrop/index.html">Glisser & Déposer</a> s'est terminée sur une fenêtre (Voir remarque ci-dessous)
  <font color="#924B72">#PB_Event_GadgetDrop</font>      : Une opération <a href="../dragdrop/index.html">Glisser & Déposer</a> s'est terminée sur un <a href="../gadget/index.html">gadget</a> (Voir remarque ci-dessous)

</font></pre>
Vous trouverez un exemple dans la 
description de <a href="waitwindowevent.html">WaitWindowEvent()</a>. 

</blockquote><p><b>Remarques</b></p><blockquote>

<b>Remarque importante n° 1:</b> 
Comme cette commande n'est pas 
bloquante, elle peut consommer beaucoup 
de temps processeur quand elle est dans 
une boucle d'attente. Dans ce cas, 
utilisez la commande <a href="../system/delay.html">Delay()</a>, sauf en 
présence de la fonction <a href="../screen/flipbuffers.html">FlipBuffers()</a>, 
ou mieux, il est préférable d'utiliser 
la commande <a href="waitwindowevent.html">WaitWindowEvent()</a> avec une 
petite valeur de minuteur (timeout), 
comme  par exemple 'WaitWindowEvent(1)'. 
<br>
<br>
<b>Remarque importante n° 2:</b> 
La boucle d'évènements de la fenêtre ne 
doit pas être traitée dans un 
<a href="../thread/index.html">thread</a>, 
car il y a une limitation sur OS X et 
Linux. Une erreur du débogueur sera 
levée. 
<br>
<br>
Pour obtenir le numéro de la fenêtre 
dans laquelle s'est produit l'évènement, 
utilisez la fonction <a href="eventwindow.html">EventWindow()</a>. 
<br>
<br>
Après un évènement 
<font color="#924B72">#PB_Event_WindowDrop</font> ou 
<font color="#924B72">#PB_Event_GadgetDrop</font>, les fonctions 
de la bibliothèque 
<a href="../dragdrop/index.html">Drag & Drop</a> 
peuvent être utilisées pour examiner 
et lire les données déposées. 
<br>
<br>
Si votre code n'utilise pas la commande 
<a href="../screen/flipbuffers.html">FlipBuffers()</a> et si la fonction 
'WaitWindowEvent(1) ne convient pas alors 
la boucle WindowEvent() doit respecter 
la structure suivante: 
<pre><font face="Courier New, Courier, mono" size="2">  <b><font color="#006666">Repeat</font></b> 
    Event =<font color="#006666"> WindowEvent</font>() 

    <b><font color="#006666">If</font></b> Event    <font color="#006666">; Un évènement est dans la file d'attente, il faut le gérer.</font>
      .... 
    <b><font color="#006666">Else</font></b>  
<font color="#006666">      Delay</font>(1)  <font color="#006666">; Plus d'évènements dans la file d'attente, laissons du temps processeur aux autres applications ! </font>
    <b><font color="#006666">EndIf</font></b> 
  <b><font color="#006666">Until</font></b> Event = <font color="#924B72">#PB_Event_CloseWindow</font>
</font></pre>
<b>Important:</b> Le délai ne doit pas 
être spécifié après chaque évènement, 
car quand il y a de nombreux évènements 
dans la file d'attente (lors d'un 
rafraîchissement de fenêtre, de gadgets 
etc..) l'application attendra 1 ms entre 
chaque évènement ce qui rendra 
l'affichage très lent. Le délai est 
utile uniquement quand il n'y a plus 
d'évènement dans la file d'attente 
(donc quand WindowEvent() renvoie 0). 
Une autre façon de procéder est 
d'utiliser les 'timers' avec 
WaitWindowEvent(1) ou d'en créer un avec 
<a href="addwindowtimer.html">AddWindowTimer()</a>. 

</blockquote><p><b>Exemple:</b> Avec Gadget</p><blockquote>

<pre><font face="Courier New, Courier, mono" size="2">    <b><font color="#006666">If</font></b> <font color="#006666">OpenWindow</font>(0, 0, 0, 600, 100, &quot;Position de la souris sur la fenêtre: &quot;, <font color="#924B72">#PB_Window_SystemMenu</font> | <font color="#924B72">#PB_Window_ScreenCentered</font>)
<font color="#006666">    TextGadget</font>(0, 10, 6, 200, 20, &quot;&quot;)
    
    <b><font color="#006666">Repeat</font></b>
      Event =<font color="#006666"> WindowEvent</font>()
      
      <b><font color="#006666">If</font></b> Event &lt;&gt; 0 <font color="#006666">; Tous les évènements sont traités</font>
<font color="#006666">        SetWindowTitle</font>(0, &quot;Position de la souris sur la fenêtre: &quot; +<font color="#006666"> Str</font>(<font color="#006666">WindowMouseX</font>(0)) + &quot;,&quot; +<font color="#006666"> Str</font>(<font color="#006666">WindowMouseX</font>(0))) 
      <b><font color="#006666">Else</font></b>
      
<font color="#006666">      Delay</font>(1) <font color="#006666">; En absence de FlipBuffers(), Delay() libére le processeur </font>
      <b><font color="#006666">EndIf</font></b>
    <b><font color="#006666">Until</font></b> Event = <font color="#924B72">#PB_Event_CloseWindow</font>
  <b><font color="#006666">EndIf</font></b>
</font></pre>

</blockquote><p><b>Exemple:</b> Avec Gadget (Variante)</p><blockquote>

<pre><font face="Courier New, Courier, mono" size="2">  <b><font color="#006666">If</font></b> <font color="#006666">OpenWindow</font>(0, 0, 0, 300, 30, &quot;Position de la souris sur le bureau&quot;, <font color="#924B72">#PB_Window_SystemMenu</font> | <font color="#924B72">#PB_Window_ScreenCentered</font>)
<font color="#006666">    TextGadget</font>(0, 10, 6, 200, 20, &quot;&quot;)
    
    <b><font color="#006666">Repeat</font></b>
      Event =<font color="#006666"> WindowEvent</font>()
      
      <b><font color="#006666">If</font></b> Event = 0 <font color="#006666">; Il n'y a plus d'évènement dans la file d'attente</font>
<font color="#006666">        SetGadgetText</font>(0, &quot;Coordonnées : &quot;+<font color="#006666">Str</font>(<font color="#006666">DesktopMouseX</font>())+&quot;,&quot;+<font color="#006666">Str</font>(<font color="#006666">DesktopMouseY</font>()))
      <b><font color="#006666">EndIf</font></b>
      
<font color="#006666">      Delay</font>(20) <font color="#006666">; En absence de FlipBuffers(), Delay() libére le processeur pour le multi-tâche</font>
      
    <b><font color="#006666">Until</font></b> Event = <font color="#924B72">#PB_Event_CloseWindow</font>
  <b><font color="#006666">EndIf</font></b>
</font></pre>

</blockquote><p><b>Exemple:</b> Sans Gadgets</p><blockquote>

<pre><font face="Courier New, Courier, mono" size="2">  <font color="#006666">;Quelques variables</font>
  BalleX = 400
  BalleY = 200
  BalleVitesseY.f = 5
  Gravitation.f = 2

  <font color="#006666">;Initialisation </font>
  <b><font color="#006666">If</font></b> <font color="#006666">InitSprite</font>()
<font color="#006666">    InitKeyboard</font>()
<font color="#006666">    InitMouse</font>()
  <b><font color="#006666">EndIf</font></b>

  <font color="#006666">;Création de la fenêtre</font>
<font color="#006666">  OpenWindow</font>(0, 0, 0, 800, 600, &quot;WindowEvent&quot;, <font color="#924B72">#PB_Window_SystemMenu</font>|<font color="#924B72">#PB_Window_ScreenCentered</font>)
<font color="#006666">  OpenWindowedScreen</font>(<font color="#006666">WindowID</font>(0), 0, 0, 800, 600)
<font color="#006666">  SetFrameRate</font>(30)
  
  <font color="#006666">;Création du sol</font>
  Sol =<font color="#006666"> CreateSprite</font>(<font color="#924B72">#PB_Any</font>, 800, 30)
<font color="#006666">  StartDrawing</font>(<font color="#006666">SpriteOutput</font>(Sol))
<font color="#006666">  Box</font>(0,0,800,30,<font color="#006666">RGB</font>(128, 0, 0))
<font color="#006666">  StopDrawing</font>()

  <font color="#006666">;Création de la Balle</font>
  Balle =<font color="#006666"> CreateSprite</font>(<font color="#924B72">#PB_Any</font>, 16, 16)
<font color="#006666">  StartDrawing</font>(<font color="#006666">SpriteOutput</font>(Balle))
<font color="#006666">  Box</font>(0,0,16,16,<font color="#006666">RGB</font>(135, 206, 235))
<font color="#006666">  Circle</font>(8,8,8,<font color="#006666">RGB</font>(255, 255, 0))
<font color="#006666">  StopDrawing</font>()

  <font color="#006666">;Création de la jauge</font>
  Image =<font color="#006666"> CreateImage</font>(<font color="#924B72">#PB_Any</font>, 8, 8, 24,<font color="#006666"> RGB</font>(255, 255, 255))
  *Memoire=<font color="#006666">EncodeImage</font>(Image ,<font color="#924B72">#PB_ImagePlugin_BMP</font>)
  Jauge =<font color="#006666"> CatchSprite</font>(<font color="#924B72">#PB_Any</font>, *Memoire)

  
  <font color="#006666">;Boucle principale</font>
  <b><font color="#006666">Repeat</font></b> 
  
    <b><font color="#006666">Repeat</font></b>
    <font color="#006666">;Gestion des évènements de la fenêtre</font>
    <font color="#006666">;====================================</font>
    <font color="#006666">;Essayez les 3 possibilités mais une seule à la fois </font>
    Evenement =<font color="#006666"> WindowEvent</font>()    <font color="#006666">; Animation</font>
    <font color="#006666">;Evenement = WaitWindowEvent()  ; Blocage de l'animation</font>
    <font color="#006666">;Evenement = WaitWindowEvent(100) ; Animation mais à chaque fois qu'un évènement apparait comme</font>
                                      <font color="#006666">; bouger la souris par exemple, l'animation sera suspendu 100 ms</font>

    <b><font color="#006666">Select</font></b> Evenement   
      <b><font color="#006666">Case</font></b> <font color="#924B72">#PB_Event_CloseWindow</font>
      <b><font color="#006666">End</font></b>
    <b><font color="#006666">EndSelect</font></b> 
    <b><font color="#006666">Until</font></b> Evenement=0
    
<font color="#006666">    FlipBuffers</font>() <font color="#006666">; ==&gt; Avec WindowEvent(), FlipBuffers() libère le processeur pour le multitâche et dispense d'un Delay(1)</font>
<font color="#006666">    ClearScreen</font>(<font color="#006666">RGB</font>(135, 206, 235))
    
<font color="#006666">    ExamineKeyboard</font>() <font color="#006666">;Evènement clavier</font>
     
<font color="#006666">    DisplaySprite</font>(Jauge, 50, 570-BalleY) <font color="#006666">;Affichage de la jauge</font>
<font color="#006666">    ZoomSprite</font>(Jauge,  20, 570)
     
<font color="#006666">    DisplaySprite</font>(Sol, 0, 570) <font color="#006666">;Affichage du sol</font>
    
<font color="#006666">    DisplaySprite</font>(Balle, BalleX, BalleY) <font color="#006666">;Affichage de la Balle</font>
    
    <font color="#006666">;Mouvement de la Balle </font>
    BalleVitesseY = BalleVitesseY + Gravitation 
    BalleY = BalleY + BalleVitesseY
    
    <font color="#006666">;Gestion de la collision de la balle avec le sol</font>
    <b><font color="#006666">If</font></b> <font color="#006666">SpriteCollision</font>(Balle, BalleX, BalleY+16, Sol, 0, 570)
    BalleY= 554
    BalleVitesseY = -BalleVitesseY
    <b><font color="#006666">EndIf</font></b>
    
  <b><font color="#006666">Until</font></b> <font color="#006666">KeyboardPushed</font>(<font color="#924B72">#PB_Key_Escape</font>)
</font></pre>

</blockquote><p><b>Voir aussi</b></p><blockquote>

<a href="waitwindowevent.html">WaitWindowEvent()</a>, <a href="eventwindow.html">EventWindow()</a>, <a href="event.html">Event()</a>, 
<a href="eventgadget.html">EventGadget()</a>, <a href="eventmenu.html">EventMenu()</a>, 
<a href="eventtimer.html">EventTimer()</a>, <a href="eventdata.html">EventData()</a>, 
<a href="eventtype.html">EventType()</a>, <a href="postevent.html">PostEvent()</a>, 
<a href="bindevent.html">BindEvent()</a>, <a href="unbindevent.html">UnbindEvent()</a> 

</Blockquote><p><b>OS Supportés </b><Blockquote>Tous</Blockquote></p><center><- <a href=windowbounds.html>WindowBounds()</a> - <a href=index.html>Window Index</a> - <a href=windowheight.html>WindowHeight()</a> -><br><br>

</body></html>
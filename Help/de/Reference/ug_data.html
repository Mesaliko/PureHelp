<html><head><title>Einsteiger-Kapitel - Speichern von Daten im Speicher</title><meta charset="utf-8"></head>
<body bgcolor="#FFFFDF" link="#009999" vlink="#006666" alink="#006666">
<font face="Arial" size="2"><p align="center"><b><font size="5">Einsteiger-Kapitel - Speichern von Daten im Speicher</font></b></p>

Dieses Beispiel sammelt Informationen über die <a href="../file/index.html">Dateien</a> im angemeldeten 
Benutzer-Verzeichnis (User Home Directory) in einer <a href="../reference/structures.html">strukturierten</a> 
<a href="../reference/newlist.html">verketteten Liste</a>. Für den Moment ist die Ausgabe nicht sehr 
aufregend, aber wir kommen später auf dieses Beispiel zurück und machen es auf mehreren 
verschiedenen Wegen ein wenig freundlicher. 
<pre><font face="Courier New, Courier, mono" size="2">  <font color="#006666">; Dieser Abschnitt beschreibt die Felder einer Struktur oder eines Datensatzes, in diesem</font>
  <font color="#006666">; Fall meist Integer, aber beachten Sie den String für den Dateinamen und den Quad-Wert</font>
  <font color="#006666">; für die Dateigröße.</font>
  <b><font color="#006666">Structure</font></b> FILEITEM
    Name.s
    Attributes.i
    Size.q
    DateCreated.i
    DateAccessed.i
    DateModified.i
  <b><font color="#006666">EndStructure</font></b>
  
  <font color="#006666">; Jetzt definieren wir eine neue Liste an Dateien unter Verwendung der zuvor spezifizierten</font>
  <font color="#006666">; Struktur, und einige andere Variablen welche wir später verwenden werden.</font>
  <b><font color="#006666">NewList</font></b> <font color="#006666">Files</font>.FILEITEM()
  <b><font color="#006666">Define</font></b>.s Folder
  <b><font color="#006666">Define</font></b>.l Result
  
  <font color="#006666">; Diese Funktion ermittelt das Benutzer-Verzeichnis des angemeldeten Anwenders.</font>
  Folder =<font color="#006666"> GetHomeDirectory</font>()
  
  <font color="#006666">; Öffnen des Verzeichnisses zum Auflisten all seiner Inhalte.</font>
  Result =<font color="#006666"> ExamineDirectory</font>(0, Folder, &quot;*.*&quot;)  
  
  <font color="#006666">; Ist dies ok, beginnen wir das Auflisten der Einträge.</font>
  <b><font color="#006666">If</font></b> Result
    <font color="#006666">; Durchlauf bis NextDirectoryEntry(0) Null zurückgibt - was anzeigt, dass es keine weiteren Einträge gibt.</font>
    <b><font color="#006666">While</font></b> <font color="#006666">NextDirectoryEntry</font>(0)
      <font color="#006666">; Wenn der Verzeichnis-Eintrag eine Datei und kein Ordner ist.</font>
      <b><font color="#006666">If</font></b> <font color="#006666">DirectoryEntryType</font>(0) = <font color="#924B72">#PB_DirectoryEntry_File</font>
        <font color="#006666">; Fügt ein neues Element zur verketteten Liste hinzu.</font>
<font color="#006666">        AddElement</font>(<font color="#006666">Files</font>())
        <font color="#006666">; Und füllt sie mit den Eigenschaften der Datei.</font>
<font color="#006666">        Files</font>()\Name =<font color="#006666"> DirectoryEntryName</font>(0)
<font color="#006666">        Files</font>()\Size =<font color="#006666"> DirectoryEntrySize</font>(0)
<font color="#006666">        Files</font>()\Attributes =<font color="#006666"> DirectoryEntryAttributes</font>(0)
<font color="#006666">        Files</font>()\DateCreated =<font color="#006666"> DirectoryEntryDate</font>(0, <font color="#924B72">#PB_Date_Created</font>)
<font color="#006666">        Files</font>()\DateAccessed =<font color="#006666"> DirectoryEntryDate</font>(0, <font color="#924B72">#PB_Date_Accessed</font>)
<font color="#006666">        Files</font>()\DateModified =<font color="#006666"> DirectoryEntryDate</font>(0, <font color="#924B72">#PB_Date_Modified</font>)
      <b><font color="#006666">EndIf</font></b>
    <b><font color="#006666">Wend</font></b>
    <font color="#006666">; Schließt das Verzeichnis.</font>
<font color="#006666">    FinishDirectory</font>(0)
  <b><font color="#006666">EndIf</font></b>
  
  <font color="#006666">; Zeigt die Ergebnisse im Debug-Ausgabefenster (wenn es keinen Eintrag gibt, wird nichts angezeigt)</font>
  <b><font color="#006666">ForEach</font></b> <font color="#006666">Files</font>()
    <b><font color="#006666">Debug</font></b> &quot;Filename = &quot; +<font color="#006666"> Files</font>()\Name
    <b><font color="#006666">Debug</font></b> &quot;Size = &quot; +<font color="#006666"> Str</font>(<font color="#006666">Files</font>()\Size)
    <b><font color="#006666">Debug</font></b> &quot;Attributes = &quot; +<font color="#006666"> StrU</font>(<font color="#006666">Files</font>()\Attributes)
    <b><font color="#006666">Debug</font></b> &quot;Created = &quot; +<font color="#006666"> StrU</font>(<font color="#006666">Files</font>()\DateCreated)
    <b><font color="#006666">Debug</font></b> &quot;Accessed = &quot; +<font color="#006666"> StrU</font>(<font color="#006666">Files</font>()\DateAccessed)
    <b><font color="#006666">Debug</font></b> &quot;Modified = &quot; +<font color="#006666"> StrU</font>(<font color="#006666">Files</font>()\DateModified)
  <b><font color="#006666">Next</font></b> <font color="#006666">Files</font>()
</font></pre>

Ok, zuerst sind die Datumsangaben in der Ausgabe nur Zahlen - dies ist nicht sehr nützlich, 
daher lasst sie uns ein bisschen vertrauter aussehen. Ersetzen Sie die letzten drei 
Debug-Befehle mit diesen: 
<pre><font face="Courier New, Courier, mono" size="2">      ...
      <b><font color="#006666">Debug</font></b> &quot;Created = &quot; +<font color="#006666"> FormatDate</font>(&quot;%dd/%mm/%yyyy&quot;,<font color="#006666"> Files</font>()\DateCreated)
      <b><font color="#006666">Debug</font></b> &quot;Accessed = &quot; +<font color="#006666"> FormatDate</font>(&quot;%dd/%mm/%yyyy&quot;,<font color="#006666"> Files</font>()\DateAccessed)
      <b><font color="#006666">Debug</font></b> &quot;Modified = &quot; +<font color="#006666"> FormatDate</font>(&quot;%dd/%mm/%yyyy&quot;,<font color="#006666"> Files</font>()\DateModified)
</font></pre>

Die <a href="../date/formatdate.html">FormatDate()</a> Funktion nimmt ein Datum in PureBasic's eigenem numerischen Datumsformat 
und zeigt es in einem Format an, mit dem wir etwas anfangen können. So, jetzt beginnen die 
Dinge etwas vernünftiger auszusehen. 
<br>
<br>
Im Moment liegt die Liste nicht in einer bestimmten Reihenfolge vor, daher lasst uns 
<a href="../sort/sortstructuredlist.html">die Liste sortieren</a>, bevor wir sie anzeigen. 
Fügen Sie diese Zeile vor dem Kommentar über das Anzeigen der Liste und der 
<a href="../reference/foreach_next.html">ForEach</a> Schleife hinzu. 
<pre><font face="Courier New, Courier, mono" size="2">  ...
  
  <font color="#006666">; Sortiert die Liste in alphabetisch aufsteigender Reihenfolge der Dateinamen.</font>
<font color="#006666">  SortStructuredList</font>(<font color="#006666">Files</font>(), <font color="#924B72">#PB_Sort_Ascending</font>,<font color="#006666"> OffsetOf</font>(FILEITEM\Name), <font color="#924B72">#PB_String</font>)
  
  <font color="#006666">; Wenn es einige Einträge in der Liste gibt, zeigen wir die Ergebnisse im Debug-Ausgabefenster.</font>
  ...
</font></pre>

Dieser Befehl nimmt die <a href="../reference/structures.html">strukturierte</a> <a href="../reference/newlist.html">Liste</a>, 
und sortiert sie in aufsteigender Reihenfolge (<font color="#924B72">#PB_Sort_Ascending</font>), abhängig vom Feld 'Name' der Struktur 
(OffsetOf(FILEITEM\Name)), welches ein String-Wert ist (<font color="#924B72">#PB_String</font>). 


<p><b>Einsteiger-Kapitel Navigation</b></p><blockquote>

<a href="../reference/ug_string.html">< Vorheriges: String-Manipulation</a> | <a href="../reference/ug_overview.html">Überblick</a> | <a href="../reference/ug_inputoutput.html">Nächstes: Eingabe & Ausgabe ></a> 
</blockquote>
</font></body></html>
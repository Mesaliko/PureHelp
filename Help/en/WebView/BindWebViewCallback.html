<html><head><title>BindWebViewCallback</title><meta charset="utf-8"></head>
<body bgcolor="#FFFFDF" link="#009999" vlink="#006666" alink="#006666">
<font face="Arial" size="2"><p align="center"><b><font size="4">BindWebViewCallback()</font></b></p>
<p><b>Syntax</b></p><blockquote>
<font color="#006666"><b>BindWebViewCallback</b></font>(#Gadget, JavaScriptFunction$, @Callback())</blockquote>

</blockquote>
<b>Description</b><br><blockquote>

Bind a PureBasic callback to a new JavaScript function. The JavaScript function will be automatically created in the web view and will be available in the JavaScript code. 
When the JavaScript function will be called in the webview gadget, the PureBasic 'Callback' will be called. The JavaScript code will be halted until the PureBasic callback 
finish its execution. 

</blockquote><p><b>Parameters</b></p><blockquote>
<style type="text/css">
table.parameters { border-spacing: 0px; border-style: none; border-collapse: collapse; }
table.parameters td { border-width: 1px; padding: 6px; border-style: solid; border-color: gray; vertical-align: top; font-family:Arial; font-size:10pt; }
</style>
<table width="90%" class="parameters">
<tr><td width="10%"><i>#Gadget</i></td>
<td width="90%"> 
The web view gadget to bind the event to. 

</td></tr>
<tr><td><i>JavaScriptFunction$</i></td>
<td> 
The case-sensitive name of the JavaScript function to create and to bind the callback to. 

</td></tr>
<tr><td><i>@Callback()</i></td>
<td> 
The callback procedure to call when the JavaScript function is called. It has to be declared like this: 
<pre><font face="Courier New, Courier, mono" size="2">  <b><font color="#006666">Procedure</font></b> <font color="#006666">JavaScriptCallback</font>(JsonParameters$)
    <font color="#006666">; </font>
    <font color="#006666">; 'JsonParameters$' contains all the parameters which were specified when the JavaScript function was called in JSON format.</font>
    <font color="#006666">;</font>
    
    <font color="#006666">; Code</font>
    
    <b><font color="#006666">ProcedureReturn</font></b> <font color="#006666">UTF8</font>(JsonResult$)
  <b><font color="#006666">EndProcedure</font></b>
</font></pre>
The callback procedure can return a result which can be used by the JavaScript function. 

</td></tr>
</table>
</blockquote><p><b>Return value</b></p><blockquote>
None.


</blockquote><p><b>Remarks</b></p><blockquote>

If your JavaScript callback function returns a <a href="../string/utf8.html">UTF8()</a> generated result instead of 0, PureBasic will 
automatically free the memory used to return it when it is no longer needed. 

</blockquote><p><b>Example:</b> with a 2 parameters Javascript function</p><blockquote>

<pre><font face="Courier New, Courier, mono" size="2">  <font color="#006666">; A simple button which will change its label by the result of the PureBasic callback</font>
  <font color="#006666">;</font>
  Html$ =  ~&quot;&lt;button id=\&quot;displayInfo\&quot;&gt;Display Info&lt;/button&gt;\n&quot;+
           ~&quot;&lt;script&gt;\n&quot;+
           ~&quot;  const displayInfoElement=document.getElementById(\&quot;displayInfo\&quot;);\n&quot;+
           ~&quot;  document.addEventListener(\&quot;DOMContentLoaded\&quot;, () =&gt; {\n&quot;+
           ~&quot;    displayInfoElement.addEventListener(\&quot;click\&quot;, () =&gt; {\n&quot;+
           ~&quot;      window.displayInfo(1000, 2000).then(result =&gt; {\n&quot;+
           ~&quot;        displayInfoElement.textContent = result.sum;\n&quot;+
           ~&quot;      });\n&quot;+
           ~&quot;    });\n&quot;+
           ~&quot;  });\n&quot;+
           ~&quot;&lt;/script&gt;&quot;<font color="#006666">;</font>
    
  <b><font color="#006666">Procedure</font></b> <font color="#006666">IncrementJS</font>(JsonParameters$)
    
    <b><font color="#006666">Dim</font></b> <font color="#006666">Parameters</font>(0)
    
<font color="#006666">    ParseJSON</font>(0, JsonParameters$)
<font color="#006666">    ExtractJSONArray</font>(<font color="#006666">JSONValue</font>(0),<font color="#006666"> Parameters</font>())
    
    <b><font color="#006666">Debug</font></b> &quot;Nb Parameters: &quot; +<font color="#006666"> ArraySize</font>(<font color="#006666">Parameters</font>())
    
    <b><font color="#006666">Debug</font></b> &quot;Parameter 1: &quot; +<font color="#006666"> Parameters</font>(0)
    <b><font color="#006666">Debug</font></b> &quot;Parameter 2: &quot; +<font color="#006666"> Parameters</font>(1)
    
    <b><font color="#006666">ProcedureReturn</font></b> <font color="#006666">UTF8</font>(~&quot;{ \&quot;sum\&quot;: &quot;+<font color="#006666">Str</font>(<font color="#006666">Parameters</font>(0) +<font color="#006666"> Parameters</font>(1))+ &quot;}&quot;)
  <b><font color="#006666">EndProcedure</font></b>


<font color="#006666">  OpenWindow</font>(0, 100, 100, 400, 400, &quot;Hello&quot;, <font color="#924B72">#PB_Window_SystemMenu</font>)

<font color="#006666">  WebViewGadget</font>(0, 0, 0, 400, 400)
<font color="#006666">  SetGadgetItemText</font>(0, <font color="#924B72">#PB_WebView_HtmlCode</font>, Html$)
    
<font color="#006666">  BindWebViewCallback</font>(0, &quot;displayInfo&quot;, @IncrementJS())

  <b><font color="#006666">Repeat</font></b> 
    Event =<font color="#006666"> WaitWindowEvent</font>()
  <b><font color="#006666">Until</font></b> Event = <font color="#924B72">#PB_Event_CloseWindow</font>
</font></pre>

</blockquote><p><b>See Also</b></p><blockquote>

<a href="webviewgadget.html">WebViewGadget()</a>, <a href="unbindwebviewcallback.html">UnbindWebViewCallback()</a> 

</Blockquote><p><b>Supported OS </b><Blockquote>All</Blockquote></p><center><a href=index.html>WebView Index</a> - <a href=unbindwebviewcallback.html>UnbindWebViewCallback()</a> -><br><br>

</body></html>
<html><head><title>ImagePlugin_GIF.pb</title><meta charset=~"utf-8"></head>
<body bgcolor="#FFFFDF" link="#009999" vlink="#006666" alink="#006666">
<pre><font face="Courier New, Courier, mono" size="2"><font color="#006666">;
</font><font color="#006666">; ------------------------------------------------------------
</font><font color="#006666">;
</font><font color="#006666">;   PureBasic - ImagePlugin GIF Viewer example file
</font><font color="#006666">;
</font><font color="#006666">;    (c) Fantaisie Software
</font><font color="#006666">;
</font><font color="#006666">; ------------------------------------------------------------
</font><font color="#006666">;
</font>
<font color="#006666">; Enable the GIF decoder
</font><font color="#006666">UseGIFImageDecoder</font>()

<font color="#006666">; Loading a GIF file
</font><b><font color="#006666">If</font></b> <font color="#006666">LoadImage</font>(0, <font color="#924B72">#PB_Compiler_Home</font>+&quot;Examples/Sources/Data/PureBasicLogo.gif&quot;)

<font color="#006666">  OpenWindow</font>(0, 100, 100,<font color="#006666"> DesktopUnscaledX</font>(<font color="#006666">ImageWidth</font>(0)),<font color="#006666"> DesktopUnscaledY</font>(<font color="#006666">ImageHeight</font>(0)), &quot;GIF viewer&quot;)
 
<font color="#006666">  CanvasGadget</font>(0, 0, 0,<font color="#006666"> ImageWidth</font>(0),<font color="#006666"> ImageHeight</font>(0))
  
  <font color="#006666">; Add a timer to animate the GIF, starts immediately to display the first frame witout delay
</font><font color="#006666">  AddWindowTimer</font>(0, 0, 1)
 
  <b><font color="#006666">Repeat</font></b>
    Event =<font color="#006666"> WaitWindowEvent</font>()
   
    <b><font color="#006666">If</font></b> Event = <font color="#924B72">#PB_Event_Timer</font>
<font color="#006666">      SetImageFrame</font>(0, Frame)
     
      <font color="#006666">; Each GIF frame can have its own delay, so change the timer accordingly
</font>      <font color="#006666">;
</font><font color="#006666">      RemoveWindowTimer</font>(0, 0)
<font color="#006666">      AddWindowTimer</font>(0, 0,<font color="#006666"> GetImageFrameDelay</font>(0))
     
      <b><font color="#006666">If</font></b> <font color="#006666">StartDrawing</font>(<font color="#006666">CanvasOutput</font>(0))
<font color="#006666">        DrawImage</font>(<font color="#006666">ImageID</font>(0), 0, 0)
<font color="#006666">        StopDrawing</font>()
      <b><font color="#006666">EndIf</font></b>
      
      <font color="#006666">; Go to next frame
</font>      Frame+1
      <b><font color="#006666">If</font></b> Frame &gt;=<font color="#006666"> ImageFrameCount</font>(0) <font color="#006666">; Cycle back to first frame, to play in loop
</font>        Frame = 0
      <b><font color="#006666">EndIf</font></b>
    <b><font color="#006666">EndIf</font></b>
   
  <b><font color="#006666">Until</font></b> Event = <font color="#924B72">#PB_Event_CloseWindow</font>
<b><font color="#006666">Else</font></b>
  <b><font color="#006666">Debug</font></b> &quot;Impossible to load the file: &quot; + Filename$
<b><font color="#006666">EndIf</font></b>
</font></pre>
</body></html>
